{% include 'reception_header.html' %}

<style>

.table-container {
        text-align: center;
        overflow-x: auto; /* Enable horizontal scrolling */
        max-width: 100%; /* Make table responsive */
    }

    /* Style form elements */
    form table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px; /* Add margin at the top */
    }

    form table th {
        text-align: left;
        padding: 10px;
        font-weight: bold;
    }

    form table td {
        padding: 10px;
    }

    form table input[type='text'],
    form table input[type='date'],
    form table input[type='submit'] {
        width: calc(100% - 20px); /* Adjust input width */
        padding: 8px;
        margin-bottom: 10px; /* Add margin between inputs */
        border-radius: 5px;
        border: 1px solid #ccc; /* Add border */
    }

    form table input[type='submit'] {
        width: 100%; /* Full width for submit button */
        margin-top: 15px; /* Add margin at the top of the button */
        background-color: #4CAF50; /* Green background */
        color: white;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
    }

    form table input[type='submit']:hover {
        background-color: #45a049; /* Darker green on hover */
    }

    /* Your existing CSS styles */

    /* Additional styling for specific input fields */
    form table input[type='text'][name='house_name'],
    form table input[type='text'][name='place'],
    form table input[type='password'][name='password'],
    form table input[type='radio'][name=''] {
        width: calc(100% - 20px); /* Adjust width */
        padding: 8px;
        margin-bottom: 10px; /* Add margin between inputs */
        border-radius: 5px;
        border: 1px solid #ccc; /* Add border */
    }

    .google-search-container {
        display: flex;
        align-items: center;
        width: 300px; /* Adjust the width as needed */
        margin: 0 auto;
        border: 1px solid #ccc;
        border-radius: 5px;
        overflow: hidden;
    }

    .google-search-input {
        flex: 1;
        padding: 10px;
        border: none;
        outline: none;
    }
    
    .google-search-button {
        padding: 10px 15px;
        background-color: #4285f4;
        color: #fff;
        border: none;
        cursor: pointer;
    }

    .table-container {
    text-align: center;
    overflow-x: auto; /* Enable horizontal scrolling */
    max-width: 100%; /* Make table responsive */
}

/* Style the table */
.payment-table {
    width: 100%; /* Set table width to 100% */
    border-collapse: collapse; /* Ensure borders are consistent */
    /* Add other table styles as needed */
}

.New {
        display: none;
        text-align: center;
        font-size: 18px;
        font-weight: bold;
        color: #FF0000; /* Red color */
        margin-top: 20px;
        padding: 10px;
        border: 2px dashed #FF0000; /* Red dashed border */
        border-radius: 5px;
    }


</style>
<br>
<br>
<br>
<div class="container-xl py-lg-5">
<h1><b>ADD PATIENTS</b></h1>

        
{% if data['updates'] %}


<form method="POST">
    <table align="center" border="1">
        <tr>
            <th>FIRST NAME</th>
            <td><input type="text" name="fname" class="form-control" readonly placeholder="Enter first name" value="{{data['updates'][0]['first_name']}}"></td>
        </tr>
        <tr>
            <th>LAST NAME</th>
            <td><input type="text" name="lname" class="form-control" readonly placeholder="Enter last name" value="{{data['updates'][0]['last_name']}}"></td>
        </tr>
        <tr>
            <th>PHONE</th>
            <td><input type="text" name="phone" maxlength="10" class="form-control" placeholder="Enter phone number" value="{{data['updates'][0]['phone']}}"></td>
        </tr>
        <tr>
            <th>EMAIL</th>
            <td><input type="email" name="email" class="form-control" placeholder="Enter email" value="{{data['updates'][0]['email']}}"></td>
        </tr>
        <tr>
            <th>HOUSE NAME</th>
            <td><input type="text" name="house_name" class="form-control" placeholder="Enter house name" value="{{data['updates'][0]['house_name']}}"></td>
        </tr>
        <tr>
            <th>PLACE</th>
            <td><input type="text" name="place" class="form-control" placeholder="Enter place" value="{{data['updates'][0]['place']}}"></td>
        </tr><br>
        <tr>
            <th>GENDER</th>
            <td>
                <input type="radio" id="male" name="gender" value="male" required>
                <label for="male" style="margin-right: 80px;font-size: 20px;">Male</label>
               
                <input type="radio" id="female" name="gender" value="female">
                <label for="female" style="margin-right: 80px;font-size: 20px;">Female</label>
                
                <input type="radio" id="other" name="gender"  value="other">
                <label for="other" style="margin-right: 80px;font-size: 20px;">Other</label>
                
            </td>
        </tr>
            <tr>
                <th>BLOOD GROUP</th>
                <td><select class="form-control" name="blood">
                    <option value="">{{data['updates'][0]['blood_group']}}</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                    
                </select>
                </td>
            </tr>
        <tr>
            <th>DOB</th>
            <td><input type="text" name="date" class="form-control" readonly value="{{data['updates'][0]['dob']}}"></td>
        </tr>
        <tr></tr>
        <tr>
            <td colspan="2" align="center"><input type="submit" name="update" value="UPDATE"></td>
        </tr>
    </table>
</form>


{% else %}

    <form method="POST">
        <table align="center" border="1">
            <tr>
                <th>FIRST NAME</th>
                <td><input type="text" name="fname" class="form-control" placeholder="Enter first name" required></td>
            </tr>
            <tr>
                <th>LAST NAME</th>
                <td><input type="text" name="lname" class="form-control"  placeholder="Enter last name" required></td>
            </tr>
            <tr>
                <th>PHONE</th>
                <td><input type="text" name="phone" maxlength="10" class="form-control"  placeholder="Enter phone number" required></td>
            </tr>
            <tr>
                <th>EMAIL</th>
                <td><input type="email" name="email" class="form-control"  placeholder="Enter email" required></td>
            </tr>
            <tr>
                <th>HOUSE NAME</th>
                <td><input type="text" name="house_name" class="form-control"  placeholder="Enter house name" required></td>
            </tr>
            <tr>
                <th>PLACE</th>
                <td><input type="text" name="place" class="form-control"  placeholder="Enter place" required></td>
            </tr>
            <tr>
                <th>GENDER</th>
                <td>
                    <input type="radio" id="male" name="gender" value="male" required>
                    <label for="male" style="margin-right: 80px;font-size: 20px;">Male</label>
                   
                    <input type="radio" id="female" name="gender" value="female">
                    <label for="female" style="margin-right: 80px;font-size: 20px;">Female</label>
                    
                    <input type="radio" id="other" name="gender"  value="other">
                    <label for="other" style="margin-right: 80px;font-size: 20px;">Other</label>
                    
                </td>
            </tr>
            <tr>
                <th>BLOOD GROUP</th>
                <td><select class="form-control" required name="blood">
                    <option value="">--SELECT BLOOD GROUP--</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                    
                </select>
                </td>
            </tr>
            <tr>
                <th>DOB</th>
                <td><input type="date" name="dob" id="mydate" class="form-control" placeholder="Enter your date of birth" required></td>
            </tr>
            <tr>
                <th>USERNAME</th>
                <td><input type="text" name="username" class="form-control" required placeholder="Enter a username"></td>
            </tr>
            <tr>
                <th>PASSWORD</th>
                <td><input type="password" name="password" class="form-control" id="password" required placeholder="Enter password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"></td>
            </tr>
            <tr>
                <th>CONFIRM PASSWORD</th>
                <td><input type="password" name="confirm_password" class="form-control" id="confirm_password" required placeholder="Confirm your Password" onkeyup="check()">
                <span id="message"></span></td>
            </tr>
            <tr></tr>
            <tr>
                <td colspan="2" align="center"><input type="submit" name="submit"></td>
            </tr>
        </table>
    </form>

{% endif %}
<br><br><br>

<div class="google-search-container">
    <input type="text" class="google-search-input" id="search" placeholder="SEARCH PATIENTS  .....................">
    <button class="google-search-button" id="searchButton">Search</button>
</div>




<div class="table-container">
    <table align="center" border="1" class="table table-success table-striped">
        <tr>
            <th>#</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Phone</th>
            <th>Email</th>
            <th>House Name</th>
            <th>Place</th>
            <th>Gender</th>
            <th>Blood Group</th>
            <th>D.O.B</th>
        </tr>
        <br><br><br>
        {% for i in data['viewpatients'] %}
        <tr class="member-row">
            <td>{{loop.index}}</td>
            <td>{{i['first_name']}}</td>
            <td>{{i['last_name']}}</td>
            <td>{{i['phone']}}</td>
            <td>{{i['email']}}</td>
            <td>{{i['house_name']}}</td>
            <td>{{i['place']}}</td>
            <td>{{i['gender']}}</td>
            <td>{{i['blood_group']}}</td>
            <td>{{i['dob']}}</td>
            <td><a href="?action=update&patient_id={{i['patient_id']}}" class="btn btn-success">UPDATE</a></td>
            <td><a href="?action=delete&patient_id={{i['patient_id']}}" class="btn btn-danger">DELETE</a></td>
        </tr>
        {% endfor %}
    </table>
</div>

<div class='New' style="display: none;">No results found</div>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#search").on("keyup", function () {
                var searchTerm = $(this).val().toLowerCase();
                var found = false; // Flag to check if any results are found

                $(".member-row").each(function () {
                    var text = $(this).text().toLowerCase();
                    var match = text.indexOf(searchTerm) >= 0;
                    $(this).toggle(match); // Toggle based on match

                    if (match) {
                        found = true; // Set flag to true if any match is found
                    }
                });

                if (!found) {
                    $(".New").show();
                    $(".table-container").hide();
                } else {
                    $(".New").hide();
                    $(".table-container").show();
                }
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
                 const today = new Date();
                 const formattedDate = today.toISOString().split('T')[0];
                 const dateInput = document.getElementById('mydate');
                 
                 dateInput.max = formattedDate; // Set minimum date  // Set default value to today's date
             });
    </script>
</div>



<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
crossorigin="anonymous"></script>







<script src="
https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
    </script>
<script>
    $(function() {
        $("input[name='fname']").on('input', function(e) {
            $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));

        });
        $("input[name='lname']").on('input', function(e) {
            $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));

        });
		$("input[name='place']").on('input', function(e) {
            $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));

        });
		$("input[name='blood']").on('input', function(e) {
            $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));

        });
		$("input[name='username']").on('input', function(e) {
            $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));

        });
        $("input[name='house_name']").on('input', function(e) {
            $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));

        });
		// $("input[name='date']").on('input', function(e) {
        //     $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));

        // });
        $("input[name='dob']").on('input', function(e) {
            $(this).val($(this).val().replace(/[^0-9/]/g, ''));

        });
        
        $("input[name='phone']").on('input', function(e) {
        	$(this).val($(this).val().replace(/[^0-9]/g, ''));
            
        });
        $("input[name='pin']").on('input', function(e) {
        	$(this).val($(this).val().replace(/[^0-9]/g, ''));
            
        });
        $("input[name='email']").on('input', function(e) {
              var re = /([A-Z0-9a-z_-][^@])+?@[^$#<>?]+?\.[\w]{1,}/.test(this.value);
                if(!re) {
                    $('#eerror').show();
                } else {
                    $('#eerror').hide();
                }

        });
        $("input[name='address']").on('input', function(e) {
            $(this).val($(this).val().replace(/[^A-Za-z0-9()/. ]/g, ''));

        });
        $("input[name='place']").on('input', function(e) {
            $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));

        });
            
        $("input[name='password']").on('input', function(e) {
        	$(this).val($(this).val().replace(/[^0-9A-Za-z@/. ]/g, ''));
            
        });
    });



   var check = function() {
  if (document.getElementById('password').value ==
    document.getElementById('confirm_password').value) {
    document.getElementById('message').style.color = 'green';
    document.getElementById('message').innerHTML = 'matching';
  } else {
    document.getElementById('message').style.color = 'red';
    document.getElementById('message').innerHTML = 'not matching';
  }
}
</script>




{% include 'reception_footer.html' %}